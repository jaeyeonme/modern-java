## 스트림으로 데이터 수집

- Collectors 클래스로 컬렉션 만들고 사용하기
- 하나의 값으로 데이터 스트림 리듀스하기
- 특별한 리듀싱 요약 연산
- 데이터 그룹화와 분할
- 자신만의 커스텀 컬렉터 개발

> 컬렉션(Collection), 컬렉터(Collector), collect는 서로 다르다

자바8의 스트림은 데이터 집합을 멋지게 처리하는 게으른 반복자라고 설명할 수 있다. 스트림의 연산은 filter 또는 map 같은 중간 연산과 count, findFirst, forEach, reduce 등의 최종 연산으로서, 여러 연산을 연결할 수 있다.

중간 연산은 한 스트림을 다른 스트림으로 변환하는 연산으로서, 여러 연산을 연결할 수 있다. 중간 연산은 스트림 파이프라인을 구성하며, 스트림의 요소를 `소비` 하지 않는다. 반면 최종 연산은 스트림의 요소르 소비해서 최종 결과를 도출한다.

<br />

collect와 컬렉터로 구현할 수 있는 질의 예제

- 통화별로 트랜잭션을 그룹화한 다음에 해당 통화로 일어난 모든 트랜잭션 합계를 계산하시오.(Map<Currency, INteger> 반환)
- 트랜잭션을 비싼 트랜잭션과 저렴한 트랜잭션 두 그룹으로 분로하시오. (Map<Boolean, List<Transaction>> 반환)
- 트랜잭션을 도시 등 다수준으로 그룹화하시오. 그리고 각 트랜잭션이 비싼지 저렴한지 구분하시오. (Map<String, Map<Boolean, List<Transaction>>> 반환)
  
<br />
<br />

**통화별로 트랜잭션을 그룹화한 코드(명령형 버전)**
  
```java
Map<Currency, List<Transaction>> transactionByCurrencies = new HashMap<>(); // 그룹화한 트랜잭션을 저장할 맵을 생성한다.
for (Tranasaction transaction : transactions) { // 트랜잭션 리스트를 반복한다.
    Currency currency = transaction.getCurrency();
    List<Transaction> transactionsForCurrency = 
            transactionsByCurrencies.get(currency);
    if (transactionsForCurrency == null) {      // 현재 통화를 그룹화한 맵에 항목이 없으면 항목을 만든다.
        transactionsForCurrency = new ArrayList<>();
        transactionsByCurrencies.put(currency, transactionsForCurrency);
    }
    transactionsForCurrency.add(transaction);   // 같은 통화를 가진 트랜잭션 리스트에서 현재 탐색 중인 트랜잭션을 추가한다.
}
```
